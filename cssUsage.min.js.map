{"version":3,"sources":["cssUsage.src.js"],"names":["_","ArrayWrapper","a","mapInline","map","bind","filter","reduce","window","CSSUsageLodash","array","source","f","v","value","transform","clone","Array","length","i","shouldValueBeIncluded","s","computeReduction","reduction","shorthands","shorthandProperties","expandCache","Object","create","unexpandCache","expand","property","result","prefixData","match","prefix","prefixFreeProperty","hasOwnProperty","forEach","p","longhand","push","apply","unexpand","sh","shorthand","indexOf","call","CSSShorthands","HtmlUsage","GetNodeName","element","node","nodeName","tags","HtmlUsageResults","tag","GetAttributes","whitelist","attributes","att","attributeTag","attribute","count","values","attributeValue","browserIsEdge","navigator","userAgent","browserIsFirefox","top","location","href","Error","CSSUsage","String","prototype","trim","console","warn","replace","CSSUsageResults","types","props","usages","rules","StyleWalker","ruleAnalyzers","elementAnalyzers","walkOverCssStyles","walkOverDomElements","amountOfInlineStyles","amountOfSelectorsUnused","amountOfSelectors","keyframes","styleSheets","document","ssIndex","styleSheet","cssRules","walkOverCssRules","e","log","stack","animations","animation","keyframe","matchCount","fakeElements","initArray","tagName","processRule","parentMatchedElements","ruleIndex","rule","type","name","CSS","supports","conditionText","parentStyleSheet","style","selectorText","matchedElements","PropertyValuesAnalyzer","cleanSelectorText","slice","querySelectorAll","ex","runRuleAnalyzers","obj","index","depth","documentElement","elements","all","runElementAnalyzers","hasAttribute","ruleType","isInline","runAnalyzer","initializer","CSSValues","createValueArray","parseValues","normalizeValue","propertyName","toLowerCase","isKeywordColor","numbers","m","nstr","nint","RegExp","split","candidateColor","isColorKeyword","test","analyzeStyleOfRule","generalizedSelectorsOf","finalize","defaultStyle","getComputedStyle","createElement","getBuggyValuesForThisBrowser","buggyValues","cache","valueExistsInRootProperty","cssText","key","rootKey","buggyState","validValues","validValuesExtractor","exec","selector","selectorCat","isRuleUnused","generalizedSelectors","concat","generalizedSelectorsData","generalizedSelector","generalizedSelectorData","rootKeyIndex","substr","normalizedKey","styleValue","getPropertyValue","isValueInvalid","undefined","isPropertyUndefined","j","gs","propStats","propObject","cssUsageMeta","knownValues","removeAnimationNames","text","sortSelectorComponents","ID_REGEXP","CLASS_REGEXP","ATTR_REGEXP","PSEUDO_REGEXP","SORT_REGEXPS","oldValue","wrongPair","cssPseudos","domClasses","cssClasses","domIds","cssIds","cssLonelyIdGates","cssLonelyClassGates","cssLonelyClassGatesMatches","cssLonelyIdGatesMatches","ID_REGEXP1","CLASS_REGEXP1","GATEID_REGEXP","GATECLASS_REGEXP","extractFeature","feature","counters","instances","instance","SelectorAnalyzer","parseSelector","selectorsText","selectors","DOMClassAnalyzer","className","elementClasses","classList","cl","c","id","domClassesArray","keys","cssClassesArray","domIdsArray","cssIdsArray","results","SuccessfulCrawls","DOMElements","SelectorsFound","InlineStylesFound","SelectorsUnused","IdsUsed","IdsRecognized","IdsUsedRecognized","ClassesUsed","ClassesRecognized","ClassesUsedRecognized","getFwkUsage","getPatternUsage","debugCSSUsage","readyState","addEventListener","onready","setTimeout","firstTime","hasAlreadyRun","startTime","performance","now","duration","onCSSUsageResults","hasBluePrintUsage","querySelector","detectedBootstrapGridUsages","trackedClasses","sizes","size","k","b","detectedBootstrapFormUsages","detectedBootstrapAlertUsages","detectedBootstrapFloatUsages","hasDogfaloMaterializeUsage","classesToLookUp","d","hasGrumbyUsage","fraction","hasInuitUsage","cu","subClassesToLookUp","sc","ns","getLonelyGatesUsage","cssUniqueLonelyClassGatesArray","cssUniqueLonelyClassGatesUsedArray","cssUniqueLonelyClassGatesUsedWorthArray","cssUniqueLonelyIdGatesArray","cssUniqueLonelyIdGatesUsedArray","cssUniqueLonelyIdGatesUsedWorthArray","detectedModernizerUsages","ModernizerUsages","tc","countInstancesOfTheClass","FwkModernizer","Modernizer","FwkModernizerDOMUsages","FwkModernizerCSSUsages","FwkBootstrap","jQuery","$","fn","modal","FwkBootstrapGridUsage","FwkBootstrapFormUsage","FwkBootstrapFloatUsage","FwkBootstrapAlertUsage","FwkBootstrapGridRecognized","FwkBootstrapFormRecognized","FwkBootstrapFloatRecognized","FwkBootstrapAlertRecognized","FwkGrumby","FwkInuit","FwkBluePrint","FwkDogfaloMaterialize","detectedClearfixUsages","detectedVisibilityUsages","PatClearfixUsage","PatVisibilityUsage","PatClearfixRecognized","PatVisibilityRecognized"],"mappings":"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","file":"cssUsage.min.js","sourcesContent":["void function() {\r\n\r\n\tvar _ = (a => new ArrayWrapper(a));\r\n\t_.mapInline = mapInline;\r\n\t_.map = map; /*.......*/ map.bind = (()=>map);\r\n\t_.filter = filter; /*.*/ filter.bind = (()=>filter);\r\n\t_.reduce = reduce; /*.*/ reduce.bind = (()=>reduce);\r\n\twindow.CSSUsageLodash = _;\r\n\t// test case: \r\n\t// 35 = CSSUsageLodash([1,2,3,4,5]).map(v => v*v).filter(v => v%2).reduce(0, (a,b)=>(a+b)).value()\r\n\t\r\n\tfunction ArrayWrapper(array) {\r\n\t\tthis.source = array;\r\n\t\tthis.mapInline = function(f) { mapInline(this.source, f); return this; };\r\n\t\tthis.map = function(f) { this.source = map(this.source, f); return this; };\r\n\t\tthis.filter = function(f) { this.source = filter(this.source, f); return this; };\r\n\t\tthis.reduce = function(v,f) { this.source = reduce(this.source, f, v); return this; };\r\n\t\tthis.value = function() { return this.source };\r\n\t}\r\n\t\r\n\tfunction map(source, transform) {\r\n\t\tvar clone = new Array(source.length);\r\n\t\tfor(var i = source.length; i--;) {\r\n\t\t\tclone[i] = transform(source[i]);\r\n\t\t}\r\n\t\treturn clone;\r\n\t}\r\n\t\r\n\tfunction mapInline(source, transform) {\r\n\t\tfor(var i = source.length; i--;) {\r\n\t\t\tsource[i] = transform(source[i]);\r\n\t\t}\r\n\t\treturn source;\r\n\t}\r\n\t\r\n\tfunction filter(source, shouldValueBeIncluded) {\r\n\t\tvar clone = new Array(source.length), i=0;\r\n\t\tfor(var s = 0; s <= source.length; s++) {\r\n\t\t\tvar value = source[s];\r\n\t\t\tif(shouldValueBeIncluded(value)) {\r\n\t\t\t\tclone[i++] = value\r\n\t\t\t}\r\n\t\t}\r\n\t\tclone.length = i;\r\n\t\treturn clone;\r\n\t}\r\n\t\r\n\tfunction reduce(source, computeReduction, reduction) {\r\n\t\tfor(var s = 0; s <= source.length; s++) {\r\n\t\t\tvar value = source[s];\r\n\t\t\treduction = computeReduction(reduction, value);\r\n\t\t}\r\n\t\treturn reduction;\r\n\t}\r\n\t\r\n}();\r\n/*!\r\n * Based on:\r\n * https://github.com/gilmoreorless/css-shorthand-properties\r\n * MIT Licensed: http://gilmoreorless.mit-license.org/\r\n */\r\nvoid function () {\r\n    /**\r\n     * Data collated from multiple W3C specs: http://www.w3.org/Style/CSS/current-work\r\n     */\r\n    var shorthands = this.shorthandProperties = {\r\n\t\t\r\n        // CSS 2.1: http://www.w3.org/TR/CSS2/propidx.html\r\n        'list-style':          ['-type', '-position', '-image'],\r\n        'margin':              ['-top', '-right', '-bottom', '-left'],\r\n        'outline':             ['-width', '-style', '-color'],\r\n        'padding':             ['-top', '-right', '-bottom', '-left'],\r\n\r\n        // CSS Backgrounds and Borders Module Level 3: http://www.w3.org/TR/css3-background/\r\n        'background':          ['-image', '-position', '-size', '-repeat', '-origin', '-clip', '-attachment', '-color'],\r\n\t\t'background-repeat':   ['-x','-y'],\r\n\t\t'background-position': ['-x','-y'],\r\n        'border':              ['-width', '-style', '-color'],\r\n        'border-color':        ['border-top-color', 'border-right-color', 'border-bottom-color', 'border-left-color'],\r\n        'border-style':        ['border-top-style', 'border-right-style', 'border-bottom-style', 'border-left-style'],\r\n        'border-width':        ['border-top-width', 'border-right-width', 'border-bottom-width', 'border-left-width'],\r\n        'border-top':          ['-width', '-style', '-color'],\r\n        'border-right':        ['-width', '-style', '-color'],\r\n        'border-bottom':       ['-width', '-style', '-color'],\r\n        'border-left':         ['-width', '-style', '-color'],\r\n        'border-radius':       ['border-top-left-radius', 'border-top-right-radius', 'border-bottom-right-radius', 'border-bottom-left-radius'],\r\n        'border-image':        ['-source', '-slice', '-width', '-outset', '-repeat'],\r\n\r\n        // CSS Fonts Module Level 3: http://www.w3.org/TR/css3-fonts/\r\n        'font':                ['-style', '-variant', '-weight', '-stretch', '-size', 'line-height', '-family'],\r\n        'font-variant':        ['-ligatures', '-alternates', '-caps', '-numeric', '-east-asian'],\r\n\r\n        // CSS Masking Module Level 1: http://www.w3.org/TR/css-masking/\r\n        'mask':                ['-image', '-mode', '-position', '-size', '-repeat', '-origin', '-clip'],\r\n        'mask-border':         ['-source', '-slice', '-width', '-outset', '-repeat', '-mode'],\r\n\r\n        // CSS Multi-column Layout Module: http://www.w3.org/TR/css3-multicol/\r\n        'columns':             ['column-width', 'column-count'],\r\n        'column-rule':         ['-width', '-style', '-color'],\r\n\r\n        // CSS Speech Module: http://www.w3.org/TR/css3-speech/\r\n        'cue':                 ['-before', '-after'],\r\n        'pause':               ['-before', '-after'],\r\n        'rest':                ['-before', '-after'],\r\n\r\n        // CSS Text Decoration Module Level 3: http://www.w3.org/TR/css-text-decor-3/\r\n        'text-decoration':     ['-line', '-style', '-color'],\r\n        'text-emphasis':       ['-style', '-color'],\r\n\r\n        // CSS Animations (WD): http://www.w3.org/TR/css3-animations\r\n        'animation':           ['-name', '-duration', '-timing-function', '-delay', '-iteration-count', '-direction', '-fill-mode', '-play-state'],\r\n\r\n        // CSS Transitions (WD): http://www.w3.org/TR/css3-transitions/\r\n        'transition':          ['-property', '-duration', '-timing-function', '-delay'],\r\n\r\n        // CSS Flexible Box Layout Module Level 1 (WD): http://www.w3.org/TR/css3-flexbox/\r\n        'flex':                ['-grow', '-shrink', '-basis'],\r\n\t\t\r\n\t\t// CSS Grid: https://drafts.csswg.org/css-grid/#grid-shorthand\r\n\t\t'grid':                ['-template', '-auto-flow', '-auto-rows','-auto-columns'],\r\n\t\t'grid-template':       ['-rows', '-columns', '-areas'],\r\n\t\t\r\n\t\t// Others:\r\n\t\t'overflow':            ['-x','-y','-style'], // https://drafts.csswg.org/css-overflow-3/\r\n\t\t\r\n    };\r\n\t\r\n\tvar expandCache = Object.create(null);\r\n\tvar unexpandCache = Object.create(null);\r\n\r\n    /**\r\n     * Expand a shorthand property into an array of longhand properties which are set by it\r\n     * @param  {string} property CSS property name\r\n     * @return {array}           List of longhand properties, or an empty array if it's not a shorthand\r\n     */\r\n    this.expand = function (property) {\r\n\t\t\r\n\t\tvar result = expandCache[property];\r\n\t\tif(result) { return result; }\r\n\t\t\r\n\t\tvar prefixData = property.match(/^(-[a-zA-Z]+-)?(.*)$/);\r\n\t\tvar prefix = prefixData[1]||'', prefixFreeProperty = prefixData[2]||'';\r\n        if (!shorthands.hasOwnProperty(prefixFreeProperty)) {\r\n            return [];\r\n        }\r\n\t\t\r\n\t\tresult = [];\r\n        shorthands[prefixFreeProperty].forEach((p) => {\r\n            var longhand = p[0] === '-' ? property + p : prefix + p;\r\n            result.push(longhand);\r\n\t\t\tresult.push.apply(result, this.expand(longhand));\r\n        });\r\n\t\t\r\n\t\treturn expandCache[property] = result;\r\n\t\t\r\n    };\r\n\t\r\n\t/**\r\n\t * Expand a longhand property into an array of shorthand which may set the value\r\n     * @param  {string} property CSS property name\r\n     * @return {array}           List of shorthand properties, or the original property if it's not a shorthand\r\n\t */\r\n\tthis.unexpand = function unexpand(property) {\r\n\t\t\r\n\t\tvar result = unexpandCache[property];\r\n\t\tif(result) { return result; }\r\n\t\t\r\n\t\tvar prefixData = property.match(/^(-[a-zA-Z]+-)?(.*)$/);\r\n\t\tvar prefix = prefixData[1]||'', prefixFreeProperty = prefixData[2]||'';\r\n\t\t\r\n\t\tresult = [];\r\n\t\tfor(var sh = 0; sh <= shorthands.length; sh++) {\r\n            var shorthand = shorthands[sh];\r\n\t\t\tif(this.expand(shorthand).indexOf(prefixFreeProperty) >= 0) {\r\n\t\t\t\tresult.push(prefix+shorthand);\r\n\t\t\t\tresult.push.apply(result,this.unexpand(prefix+shorthand));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn unexpandCache[property] = result;\r\n\t\t\r\n\t}\r\n\t\r\n}.call(window.CSSShorthands={});\r\n\r\n\r\nvoid function() {\n\n    window.HtmlUsage = {};\n\n    // This function has been added to the elementAnalyzers in\n    // CSSUsage.js under onready()\n    // <param name=\"element\"> is an HTMLElement passed in by elementAnalyzers\n    window.HtmlUsage.GetNodeName = function (element) {\n        var node = element.nodeName;\n\n        var tags = HtmlUsageResults.tags || (HtmlUsageResults.tags = {});\n        var tag = tags[node] || (tags[node] = 0);\n        tags[node]++;\n\n        GetAttributes(element, node);\n    }\n\n    function GetAttributes(element, node) {\n        // The attributes that we want to keep values for\n        var whitelist = [\n                        \"aria-hidden\",\n                        \"aria-live\",\n                        \"aria-atomic\",\n                        \"aria-busy\",\n                        \"aria-disabled\",\n                        \"aria-expanded\",\n                        \"aria-sort\",\n                        \"aria-readonly\",\n                        \"aria-required\",\n                        \"aria-selected\",\n                        \"type\",\n                        \"dir\",\n                        \"disabled\",\n                        \"draggable\",\n                        \"lang\",\n                        \"role\",\n                        \"content\",\n                        \"name\"\n                        ];\n\n        for(var i = 0; i < element.attributes.length; i++) {\n            var att = element.attributes[i];\n\n            // Only keep attributes that do not contain a dash unless they're in the whitelist\n            if(att.nodeName.indexOf('-') == -1 || whitelist.indexOf('aria-') > -1) {\n\n                var attributes = HtmlUsageResults.attributes || (HtmlUsageResults.attributes = {});\n                var attributeTag = attributes[node] || (attributes[node] = {});\n                var attribute = attributeTag[att.nodeName] || (attributeTag[att.nodeName] = { count: 0, values: {}});        \n                \n\n                if (whitelist.indexOf(att.nodeName) > -1 || (att.nodeName == \"name\" && node == \"META\")) {\n                    var attributeValue = attribute.values[att.value];\n\n                    attribute.values[att.value] = 1;\n                }\n                \n                attribute.count++;\n            }\n        }\n    }\n}();\r\nvoid function() { try {\r\n\t\r\n\tvar _ = window.CSSUsageLodash;\r\n\tvar map = _.map.bind(_);\r\n\tvar mapInline = _.mapInline ? _.mapInline : map;\r\n\tvar reduce = _.reduce.bind(_);\r\n\tvar filter = _.filter.bind(_);\r\n\t\r\n\tvar browserIsEdge = navigator.userAgent.indexOf('Edge')>=0;\r\n\tvar browserIsFirefox = navigator.userAgent.indexOf('Firefox')>=0;\r\n\t\r\n\t//\r\n\t// Guards execution against invalid conditions\r\n\t//\r\n\tvoid function() {\r\n\t\t\r\n\t\t// Don't run in subframes for now\r\n\t\tif (top.location.href !== location.href) throw new Error(\"CSSUsage: the script doesn't run in frames for now\");\r\n\t\t\r\n\t\t// Don't run if already ran\r\n\t\tif (window.CSSUsage) throw new Error(\"CSSUsage: second execution attempted; only one run can be executed; if you specified parameters, check the right ones were chosen\");\r\n\t\t\r\n\t\t// Don't run if we don't have lodash\r\n\t\tif (!window.CSSUsageLodash) throw new Error(\"CSSUsage: missing CSSUsageLodash dependency\");\r\n\r\n\t\tif (!window.HtmlUsage) throw new Error(\"APIUsage: missing HtmlUsage dependancy\");\r\n\t\t\r\n\t\t// Do not allow buggy trim() to bother usage\r\n\t\tif((''+String.prototype.trim).indexOf(\"[native code]\") == -1) {\r\n\t\t\tconsole.warn('Replaced custom trim function with something known to work. Might break website.');\r\n\t\t\tString.prototype.trim = function() {\r\n\t\t\t\treturn this.replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}();\r\n\r\n\t//\r\n\t// Prepare our global namespace\r\n\t//\r\n\tvoid function() {\t\t\r\n\t\twindow.HtmlUsageResults = {\r\n\t\t\t// this will contain all of the HTML tags used on a page\r\n\t\t\ttags: {}, /*\r\n\t\t\ttags ~= [nodeName] */\r\n\r\n\t\t\t// this will contain all of the attributes used on an HTML tag\r\n\t\t\t// and their values if they are in the whitelist\r\n\t\t\tattributes: {} /*\r\n\t\t\tattributes ~= {\r\n\t\t\t\tname: <string>, // The name of the attribute \r\n\t\t\t\ttag: <string>,  // The tag that the attr was used on\r\n\t\t\t\tvalue: <string> // The value of the attr\r\n\t\t\t} */\r\n\t\t};\r\n\r\n\t\twindow.CSSUsage = {};\r\n\t\twindow.CSSUsageResults = {\r\n\t\t\t\r\n\t\t\t// this will contain the usage stats of various at-rules and rules\r\n\t\t\ttypes: [ 0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0, ], /* \r\n\t\t\ttypes ~= {\r\n\t\t\t\t\"unknown\":0,   //0\r\n\t\t\t\t\"style\":0,     //1\r\n\t\t\t\t\"charset\": 0,  //2\r\n\t\t\t\t\"import\":0,    //3\r\n\t\t\t\t\"media\":0,     //4\r\n\t\t\t\t\"font-face\":0, //5\r\n\t\t\t\t\"page\":0,      //6\r\n\t\t\t\t\"keyframes\":0, //7 This is the @keyframe at rule\r\n\t\t\t\t\"keyframe\":0,  //8 This is the individual 0%, or from/to\r\n\t\t\t\t\"reserved9\":0, //9\r\n\t\t\t\t\"namespace\":0, //10\r\n\t\t\t\t\"reserved11\":0,//11\r\n\t\t\t\t\"supports\":0,  //12\r\n\t\t\t\t\"reserved13\":0,//13\r\n\t\t\t\t\"reserved14\":0,//14\r\n\t\t\t\t\"viewport\":0,  //15\r\n\t\t\t}*/\r\n\t\t\t\r\n\t\t\t// this will contain the usage stats of various css properties and values\r\n\t\t\tprops: Object.create(null), /*\r\n\t\t\tprops ~= {\r\n\t\t\t\t\"background-color\": {\r\n\t\t\t\t\tcount: 10,\r\n\t\t\t\t\tvalues: {\r\n\t\t\t\t\t\t\"<color-keyword>\": 9,\r\n\t\t\t\t\t\t\"inherit\": 1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}*/\r\n\t\t\t\r\n\t\t\t// this will contains the various datapoints we measure on css selector usage\r\n\t\t\tusages: {\"SuccessfulCrawls\":1},\r\n\t\t\t\r\n\t\t\t// this will contain selectors and the properties they refer to\r\n\t\t\trules: {\"@stylerule\":0,\"@atrule\":0,\"@inline\":0}, /*\r\n\t\t\trules ~= {\r\n\t\t\t\t\"#id:hover .class\": {\r\n\t\t\t\t\tcount: 10,\r\n\t\t\t\t\tprops: {\r\n\t\t\t\t\t\t\"background-color\": 5,\r\n\t\t\t\t\t\t\"color\": 4,\r\n\t\t\t\t\t\t\"opacity\": 3,\r\n\t\t\t\t\t\t\"transform\": 3\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}*/\r\n\t\t\t\r\n\t\t}\r\n\t}();\r\n\r\n\t//\r\n\t// The StyleWalker API cover the extraction of style in the browser\r\n\t//\r\n\tvoid function() { \"use strict\";\r\n\r\n\t\tCSSUsage.StyleWalker = {\r\n\t\t\t\r\n\t\t\t// This array contains the list of functions being run on each CSSStyleDeclaration\r\n\t\t\t// [ function(style, selectorText, matchedElements, ruleType) { ... }, ... ]\r\n\t\t\truleAnalyzers: [],\r\n\t\t\t\r\n\t\t\t// This array contains the list of functions being run on each DOM element of the page\r\n\t\t\t// [ function(element) { ...} ]\r\n\t\t\telementAnalyzers: [],\r\n\t\t\t\r\n\t\t\t// \r\n\t\t\twalkOverCssStyles: walkOverCssStyles,\r\n\t\t\twalkOverDomElements: walkOverDomElements,\r\n\t\t\t\r\n\t\t\t// Those stats are being collected while walking over the css style rules\r\n\t\t\tamountOfInlineStyles: 0,\r\n\t\t\tamountOfSelectorsUnused: 0,\r\n\t\t\tamountOfSelectors: 0,\r\n\t\t}\r\n\t\t\r\n\t\t// holds @keyframes temporarily while we wait to know how much they are used\r\n\t\tvar keyframes = Object.create(null);\r\n\t\t\r\n\t\t/**\r\n\t\t * For all stylesheets of the document, \r\n\t\t * walk through the stylerules and run analyzers\r\n\t\t */\r\n\t\tfunction walkOverCssStyles() {\r\n\t\t\tvar styleSheets = document.styleSheets;\r\n\r\n\t\t\t// Loop through StyeSheets\r\n\t\t\tfor (var ssIndex = styleSheets.length; ssIndex--;) {\r\n\t\t\t\tvar styleSheet = styleSheets[ssIndex];\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif(styleSheet.cssRules) {\r\n\t\t\t\t\t\twalkOverCssRules(styleSheet.cssRules, styleSheet);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.warn(\"No content loaded for stylesheet: \", styleSheet.href||styleSheet);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\tconsole.log(e, e.stack);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Hack: rely on the results to find out which\r\n\t\t\t// animations actually run, and parse their keyframes\r\n\t\t\tvar animations = (CSSUsageResults.props['animation-name']||{}).values||{};\r\n\t\t\tfor(var animation in keyframes) {\r\n\t\t\t\tvar keyframe = keyframes[animation];\r\n\t\t\t\tvar matchCount = animations[animation]|0;\r\n\t\t\t\tvar fakeElements = initArray(matchCount, (i)=>({tagName:'@keyframes '+animation+' ['+i+']'}));\r\n\t\t\t\tprocessRule(keyframe, fakeElements);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * This is the css work horse, this will will loop over the\r\n\t\t * rules and then call the rule analyzers currently registered\r\n\t\t */\r\n\t\tfunction walkOverCssRules(/*CSSRuleList*/ cssRules, styleSheet, parentMatchedElements) {\r\n\t\t\tfor (var ruleIndex = cssRules.length; ruleIndex--;) {\r\n\r\n\t\t\t\t// Loop through the rules\r\n\t\t\t\tvar rule = cssRules[ruleIndex];\r\n\r\n\t\t\t\t// Until we can correlate animation usage\r\n\t\t\t\t// to keyframes do not parse @keyframe rules\r\n\t\t\t\tif(rule.type == 7) {\r\n\t\t\t\t\tkeyframes[rule.name] = rule;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Filter \"@supports\" which the current browser doesn't support\r\n\t\t\t\tif(rule.type == 12 && (!CSS.supports || !CSS.supports(rule.conditionText))) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t// Other rules should be processed immediately\r\n\t\t\t\tprocessRule(rule,parentMatchedElements);\r\n\t\t\t\t\t\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * This function takes a css rule and:\r\n\t\t * [1] walk over its child rules if needed\r\n\t\t * [2] call rule analyzers for that rule if it has style data\r\n\t\t */\r\n\t\tfunction processRule(rule, parentMatchedElements) {\r\n\t\t\t\r\n\t\t\t// Increment the rule type's counter\r\n\t\t\tCSSUsageResults.types[rule.type|0]++; \r\n\r\n\t\t\t// Some CssRules have nested rules to walk through:\r\n\t\t\tif (rule.cssRules && rule.cssRules.length>0) {\r\n\t\t\t\t\r\n\t\t\t\twalkOverCssRules(rule.cssRules, rule.parentStyleSheet, parentMatchedElements);\r\n\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t\t// Some CssRules have style we can ananlyze\r\n\t\t\tif(rule.style) {\r\n\t\t\t\t\r\n\t\t\t\t// find what the rule applies to\r\n\t\t\t\tvar selectorText;\r\n\t\t\t\tvar matchedElements; \r\n\t\t\t\tif(rule.selectorText) {\r\n\t\t\t\t\tselectorText = CSSUsage.PropertyValuesAnalyzer.cleanSelectorText(rule.selectorText);\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif(parentMatchedElements) {\r\n\t\t\t\t\t\t\tmatchedElements = [].slice.call(document.querySelectorAll(selectorText));\r\n\t\t\t\t\t\t\tmatchedElements.parentMatchedElements = parentMatchedElements;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmatchedElements = [].slice.call(document.querySelectorAll(selectorText));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch(ex) {\r\n\t\t\t\t\t\tmatchedElements = [];\r\n\t\t\t\t\t\tconsole.warn(ex.stack||(\"Invalid selector: \"+selectorText+\" -- via \"+rule.selectorText));\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tselectorText = '@atrule:'+rule.type;\r\n\t\t\t\t\tif(parentMatchedElements) {\r\n\t\t\t\t\t\tmatchedElements = parentMatchedElements;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmatchedElements = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// run an analysis on it\r\n\t\t\t\trunRuleAnalyzers(rule.style, selectorText, matchedElements, rule.type);\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * This is the dom work horse, this will will loop over the\r\n\t\t * dom elements and then call the element analyzers currently registered,\r\n\t\t * as well as rule analyzers for inline styles\r\n\t\t */\r\n\t\tfunction walkOverDomElements(obj, index, depth) {\r\n\t\t\tobj = obj || document.documentElement; index = index|0; depth = depth|0;\r\n\r\n\t\t\t// Loop through the elements\r\n\t\t\tvar elements = [].slice.call(document.all,0);\r\n\t\t\tfor(var i = 0; i < elements.length; i++) { \r\n\t\t\t\tvar element=elements[i];\r\n\t\t\t\r\n\t\t\t\t// Analyze the element\r\n\t\t\t\trunElementAnalyzers(element, index);\r\n\t\t\t\t\r\n\t\t\t\t// Analyze its style, if any\r\n\t\t\t\tif (element.hasAttribute('style')) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Inline styles count like a style rule with no selector but one matched element\r\n\t\t\t\t\tvar ruleType = 1;\r\n\t\t\t\t\tvar isInline = true;\r\n\t\t\t\t\tvar selectorText = '@inline:'+element.tagName;\r\n\t\t\t\t\tvar matchedElements = [element];\r\n\t\t\t\t\trunRuleAnalyzers(element.style, selectorText, matchedElements, ruleType, isInline);\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Given a rule and its data, send it to all rule analyzers\r\n\t\t */\r\n\t\tfunction runRuleAnalyzers(style, selectorText, matchedElements, type, isInline) {\r\n\t\t\t\r\n\t\t\t// Keep track of the counters\r\n\t\t\tif(isInline) {\r\n\t\t\t\tCSSUsage.StyleWalker.amountOfInlineStyles++;\r\n\t\t\t} else {\r\n\t\t\t\tCSSUsage.StyleWalker.amountOfSelectors++;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Run all rule analyzers\r\n\t\t\tfor(var i = 0; i < CSSUsage.StyleWalker.ruleAnalyzers.length; i++) {\r\n\t\t\t\tvar runAnalyzer = CSSUsage.StyleWalker.ruleAnalyzers[i];\r\n\t\t\t\trunAnalyzer(style, selectorText, matchedElements, type, isInline);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Given an element and its data, send it to all element analyzers\r\n\t\t */\r\n\t\tfunction runElementAnalyzers(element, index, depth) {\r\n\t\t\tfor(var i = 0; i < CSSUsage.StyleWalker.elementAnalyzers.length; i++) {\r\n\t\t\t\tvar runAnalyzer = CSSUsage.StyleWalker.elementAnalyzers[i];\r\n\t\t\t\trunAnalyzer(element, index, depth);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Creates an array of \"length\" elements, by calling initializer for each cell\r\n\t\t */\r\n\t\tfunction initArray(length, initializer) {\r\n\t\t\tvar array = Array(length);\r\n\t\t\tfor(var i = length; i--;) { \r\n\t\t\t\tarray[i] = initializer(i);\r\n\t\t\t}\r\n\t\t\treturn array;\r\n\t\t}\r\n\r\n\t}();\r\n\r\n\t//\r\n\t// helper to work with css values\r\n\t//\r\n\tvoid function() {\r\n\r\n\t\tCSSUsage.CSSValues = {\r\n\t\t\tcreateValueArray: createValueArray,\r\n\t\t\tparseValues: parseValues,\r\n\t\t\tnormalizeValue: createValueArray\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * This will take a string value and reduce it down\r\n\t\t * to only the aspects of the value we wish to keep\r\n\t\t */\r\n\t\tfunction parseValues(value,propertyName) {\r\n\t\t\t\r\n\t\t\t// Trim value on the edges\r\n\t\t\tvalue = value.trim();\r\n\t\t\t\r\n\t\t\t// Normalize letter-casing\r\n\t\t\tvalue = value.toLowerCase();\r\n\r\n\t\t\t// Map colors to a standard value (eg: white, blue, yellow)\r\n\t\t\tif (isKeywordColor(value)) { return \"<color-keyword>\"; }\r\n\t\t\tvalue = value.replace(/[#][0-9a-fA-F]+/g, '#xxyyzz');\r\n\t\t\t\r\n\t\t\t// Escapce identifiers containing numbers\r\n\t\t\tvar numbers = ['ZERO','ONE','TWO','THREE','FOUR','FIVE','SIX','SEVEN','EIGHT','NINE'];\r\n\t\t\tvalue = value.replace(\r\n\t\t\t\t/([_a-z][-_a-z]|[_a-df-z])[0-9]+[-_a-z0-9]*/g, \r\n\t\t\t\ts=>numbers.reduce(\r\n\t\t\t\t\t(m,nstr,nint)=>m.replace(RegExp(nint,'g'),nstr),\r\n\t\t\t\t\ts\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\t// Remove any digits eg: 55px -> px, 1.5 -> 0.0, 1 -> 0\r\n\t\t\tvalue = value.replace(/(?:[+]|[-]|)(?:(?:[0-9]+)(?:[.][0-9]+|)|(?:[.][0-9]+))(?:[e](?:[+]|[-]|)(?:[0-9]+))?(%|e[a-z]+|[a-df-z][a-z]*)/g, \"$1\"); \r\n\t\t\tvalue = value.replace(/(?:[+]|[-]|)(?:[0-9]+)(?:[.][0-9]+)(?:[e](?:[+]|[-]|)(?:[0-9]+))?/g, \" <float> \");\r\n\t\t\tvalue = value.replace(/(?:[+]|[-]|)(?:[.][0-9]+)(?:[e](?:[+]|[-]|)(?:[0-9]+))?/g, \" <float> \");\r\n\t\t\tvalue = value.replace(/(?:[+]|[-]|)(?:[0-9]+)(?:[e](?:[+]|[-]|)(?:[0-9]+))/g, \" <float> \");\r\n\t\t\tvalue = value.replace(/(?:[+]|[-]|)(?:[0-9]+)/g, \" <int> \");\r\n\t\t\t\r\n\t\t\t// Unescapce identifiers containing numbers\r\n\t\t\tvalue = numbers.reduce(\r\n\t\t\t\t(m,nstr,nint)=>m.replace(RegExp(nstr,'g'),nint),\r\n\t\t\t\tvalue\r\n\t\t\t)\r\n\t\t\t\r\n\t\t\t// Remove quotes\r\n\t\t\tvalue = value.replace(/('|||\")/g, \"\");\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\tswitch(propertyName) {\r\n\t\t\t\tcase 'counter-increment':\r\n\t\t\t\tcase 'counter-reset':\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Anonymize the user identifier\r\n\t\t\t\t\tvalue = value.replace(/[-_a-zA-Z0-9]+/g,' <custom-ident> ');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\tcase 'grid':\r\n\t\t\t\tcase 'grid-template':\r\n\t\t\t\tcase 'grid-template-rows':\r\n\t\t\t\tcase 'grid-template-columns':\r\n\t\t\t\tcase 'grid-template-areas':\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Anonymize line names\r\n\t\t\t\t\tvalue = value.replace(/\\[[-_a-zA-Z0-9 ]+\\]/g,' <line-names> ');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\tcase '--var':\r\n\t\t\t\t\r\n\t\t\t\t\t// Replace (...), {...} and [...]\r\n\t\t\t\t\tvalue = value.replace(/[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]*)[)])*[)])*[)])*[)])*[)]/g, \" <parentheses-block> \");\r\n\t\t\t\t\tvalue = value.replace(/[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]*)[)])*[)])*[)])*[)])*[)]/g, \" <parentheses-block> \");\r\n\t\t\t\t\tvalue = value.replace(/\\[(?:[^()]+|\\[(?:[^()]+|\\[(?:[^()]+|\\[(?:[^()]+|\\[(?:[^()]*)\\])*\\])*\\])*\\])*\\]/g, \" <curly-brackets-block> \");\r\n\t\t\t\t\tvalue = value.replace(/\\[(?:[^()]+|\\[(?:[^()]+|\\[(?:[^()]+|\\[(?:[^()]+|\\[(?:[^()]*)\\])*\\])*\\])*\\])*\\]/g, \" <curly-brackets-block> \");\r\n\t\t\t\t\tvalue = value.replace(/\\{(?:[^()]+|\\{(?:[^()]+|\\{(?:[^()]+|\\{(?:[^()]+|\\{(?:[^()]*)\\})*\\})*\\})*\\})*\\}/g, \" <square-brackets-block> \");\r\n\t\t\t\t\tvalue = value.replace(/\\{(?:[^()]+|\\{(?:[^()]+|\\{(?:[^()]+|\\{(?:[^()]+|\\{(?:[^()]*)\\})*\\})*\\})*\\})*\\}/g, \" <square-brackets-block> \");\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\t\t\t \r\n\t\t\treturn value.trim();\r\n\t\t\t \r\n\t\t}\r\n\r\n\t\t//-----------------------------------------------------------------------------\r\n\r\n\t\t/**\r\n\t\t * This will transform a value into an array of value identifiers\r\n\t\t */ \r\n\t\tfunction createValueArray(value, propertyName) {\r\n\r\n\t\t\t// Trim value on the edges\r\n\t\t\tvalue = value.trim();\r\n\t\t\t\r\n\t\t\t// Normalize letter-casing\r\n\t\t\tvalue = value.toLowerCase();\r\n\t\t\t\r\n\t\t\t// Remove comments and !important\r\n\t\t\tvalue = value.replace(/([/][*](?:.|\\r|\\n)*[*][/]|[!]important.*)/g,'');\r\n\t\t\t\r\n\t\t\t// Do the right thing in function of the property\r\n\t\t\tswitch(propertyName) {\r\n\t\t\t\tcase 'font-family':\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Remove various quotes\r\n\t\t\t\t\tif (value.indexOf(\"'\") != -1 || value.indexOf(\"\") != -1 || value.indexOf('\"')) {\r\n\t\t\t\t\t\tvalue = value.replace(/('|||\")/g, \"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Divide at commas to separate different font names\r\n\t\t\t\t\tvalue = value.split(/\\s*,\\s*/g);\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t\t\r\n\t\t\t\tcase '--var':\r\n\t\t\t\t\r\n\t\t\t\t\t// Replace strings by dummies\r\n\t\t\t\t\tvalue = value.replace(/\"([^\"\\\\]|\\\\[^\"\\\\]|\\\\\\\\|\\\\\")*\"/g,' <string> ')\r\n\t\t\t\t\tvalue = value.replace(/'([^'\\\\]|\\\\[^'\\\\]|\\\\\\\\|\\\\')*'/g,' <string> ');\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Replace url(...) functions by dummies\r\n\t\t\t\t\tvalue = value.replace(/([a-z]?)[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]*)[)])*[)])*[)])*[)])*[)]/g, \"$1()\");\r\n\t\t\t\t\tvalue = value.replace(/([a-z]?)[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]*)[)])*[)])*[)])*[)])*[)]/g, \"$1()\");\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Remove group contents (...), {...} and [...]\r\n\t\t\t\t\tvalue = value.replace(/[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]*)[)])*[)])*[)])*[)])*[)]/g, \" <parentheses-block> \");\r\n\t\t\t\t\tvalue = value.replace(/[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]*)[)])*[)])*[)])*[)])*[)]/g, \" <parentheses-block> \");\r\n\t\t\t\t\tvalue = value.replace(/[{](?:[^{}]+|[{](?:[^{}]+|[{](?:[^{}]+|[{](?:[^{}]+|[{](?:[^{}]*)[}])*[}])*[}])*[}])*[}]/g, \" <curly-brackets-block> \");\r\n\t\t\t\t\tvalue = value.replace(/[{](?:[^{}]+|[{](?:[^{}]+|[{](?:[^{}]+|[{](?:[^{}]+|[{](?:[^{}]*)[}])*[}])*[}])*[}])*[}]/g, \" <curly-brackets-block> \");\r\n\t\t\t\t\tvalue = value.replace(/[\\[](?:[^\\[\\]]+|[\\[](?:[^\\[\\]]+|[\\[](?:[^\\[\\]]+|[\\[](?:[^\\[\\]]+|[\\[](?:[^\\[\\]]*)[\\]])*[\\]])*[\\]])*[\\]])*[\\]]/g, \" <square-brackets-block> \");\r\n\t\t\t\t\tvalue = value.replace(/[\\[](?:[^\\[\\]]+|[\\[](?:[^\\[\\]]+|[\\[](?:[^\\[\\]]+|[\\[](?:[^\\[\\]]+|[\\[](?:[^\\[\\]]*)[\\]])*[\\]])*[\\]])*[\\]])*[\\]]/g, \" <square-brackets-block> \");\r\n\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\t\r\n\t\t\t\tdefault:\r\n\t\t\t\t\r\n\t\t\t\t\t// Replace strings by dummies\r\n\t\t\t\t\tvalue = value.replace(/\"([^\"\\\\]|\\\\[^\"\\\\]|\\\\\\\\|\\\\\")*\"/g,' <string> ')\r\n\t\t\t\t\t\t\t\t .replace(/'([^'\\\\]|\\\\[^'\\\\]|\\\\\\\\|\\\\')*'/g,' <string> ');\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Replace url(...) functions by dummies\r\n\t\t\t\t\tif (value.indexOf(\"(\") != -1) {\r\n\t\t\t\t\t\tvalue = value.replace(/([a-z]?)[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]*)[)])*[)])*[)])*[)])*[)]/g, \"$1() \");\r\n\t\t\t\t\t\tvalue = value.replace(/([a-z]?)[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]*)[)])*[)])*[)])*[)])*[)]/g, \"$1() \");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Collapse whitespace\r\n\t\t\tvalue = value.trim().replace(/\\s+/g, \" \");\r\n\t\t\t\r\n\t\t\t// Divide at commas and spaces to separate different values\r\n\t\t\tvalue = value.split(/\\s*(?:,|[/])\\s*|\\s+/g);\r\n\t\t\t\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * So that we don't end up with a ton of color\r\n\t\t * values, this will determine if the color is a\r\n\t\t * keyword color value\r\n\t\t */\r\n\t\tfunction isKeywordColor(candidateColor) {\r\n\t\t\t\r\n\t\t\t// Keyword colors from the W3C specs\r\n\t\t\tvar isColorKeyword = /^(aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgrey|darkgreen|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|grey|green|greenyellow|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgreen|lightgray|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lighslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|navyblue|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen)$/;\r\n\t\t\treturn isColorKeyword.test(candidateColor);\r\n\t\t\t\r\n\t\t}\r\n\r\n\t}();\r\n\r\n\t//\r\n\t// computes various css stats\r\n\t//\r\n\tvoid function() {\r\n\r\n\t\tCSSUsage.PropertyValuesAnalyzer = analyzeStyleOfRule;\r\n\t\tCSSUsage.PropertyValuesAnalyzer.cleanSelectorText = cleanSelectorText;\r\n\t\tCSSUsage.PropertyValuesAnalyzer.generalizedSelectorsOf = generalizedSelectorsOf;\r\n\t\tCSSUsage.PropertyValuesAnalyzer.finalize = finalize;\r\n\r\n\t\t// We put a computed style in cache for filtering purposes\r\n\t\tvar defaultStyle = getComputedStyle(document.createElement('div'));\r\n\t\t// As well as some basic lies\r\n\t\tvar getBuggyValuesForThisBrowser = function() {\r\n\t\t\tvar buggyValues = getBuggyValuesForThisBrowser.cache;\r\n\t\t\tif(buggyValues) { return buggyValues; }\r\n\t\t\telse { buggyValues = Object.create(null); }\r\n\t\t\t\r\n\t\t\t// Edge reports initial value instead of \"initial\", we have to be cautious\r\n\t\t\tif(browserIsEdge) {\r\n\r\n\t\t\t\tbuggyValues['*'] = 1; // make 0 values automatic for longhand properties\r\n\t\t\t\t\r\n\t\t\t\t//buggyValues['list-style-position:outside'] = 0;\r\n\t\t\t\tbuggyValues['list-style-image:none'] = 1;\r\n\t\t\t\t//buggyValues['outline-color:invert'] = 0;\r\n\t\t\t\t//buggyValues['outline-style:none'] = 0;\r\n\t\t\t\t//buggyValues['outline-width:medium'] = 0;\r\n\t\t\t\t//buggyValues['background-image:none'] = 0;\r\n\t\t\t\t//buggyValues['background-attachment:scroll'] = 0;\r\n\t\t\t\t//buggyValues['background-repeat:repeat'] = 0;\r\n\t\t\t\t//buggyValues['background-repeat-x:repeat'] = 0;\r\n\t\t\t\t//buggyValues['background-repeat-y:repeat'] = 0;\r\n\t\t\t\t//buggyValues['background-position-x:0%'] = 0;\r\n\t\t\t\t//buggyValues['background-position-y:0%'] = 0;\r\n\t\t\t\t//buggyValues['background-size:auto'] = 0;\r\n\t\t\t\t//buggyValues['background-origin:padding-box'] = 0;\r\n\t\t\t\t//buggyValues['background-clip:border-box'] = 0;\r\n\t\t\t\t//buggyValues['background-color:transparent'] = 0;\r\n\t\t\t\tbuggyValues['border-top-color:currentcolor'] = 1;\r\n\t\t\t\tbuggyValues['border-right-color:currentcolor'] = 1;\r\n\t\t\t\tbuggyValues['border-bottom-color:currentcolor'] = 1;\r\n\t\t\t\tbuggyValues['border-left-color:currentcolor'] = 1;\r\n\t\t\t\t//buggyValues['border-top-style:solid'] = 0;\r\n\t\t\t\t//buggyValues['border-right-style:solid'] = 0;\r\n\t\t\t\t//buggyValues['border-bottom-style:solid'] = 0;\r\n\t\t\t\t//buggyValues['border-left-style:solid'] = 0;\r\n\t\t\t\tbuggyValues['border-top-width:medium'] = 1;\r\n\t\t\t\tbuggyValues['border-right-width:medium'] = 1;\r\n\t\t\t\tbuggyValues['border-bottom-width:medium'] = 1;\r\n\t\t\t\tbuggyValues['border-left-width:medium'] = 1;\r\n\t\t\t\tbuggyValues['border-image-source:none'] = 1;\r\n\t\t\t\tbuggyValues['border-image-outset:0'] = 1;\r\n\t\t\t\tbuggyValues['border-image-width:1'] = 1;\r\n\t\t\t\tbuggyValues['border-image-repeat:repeat'] = 1;\r\n\t\t\t\tbuggyValues['border-image-repeat-x:repeat'] = 1;\r\n\t\t\t\tbuggyValues['border-image-repeat-y:repeat'] = 1;\r\n\t\t\t\tbuggyValues['line-height:normal'] = 1;\r\n\t\t\t\t//buggyValues['font-size-adjust:none'] = 0;\r\n\t\t\t\tbuggyValues['font-stretch:normal'] = 1;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Firefox reports initial values instead of \"initial\", we have to be cautious\r\n\t\t\tif(browserIsFirefox) {\r\n\t\t\t\t\r\n\t\t\t\tbuggyValues['*'] = 1; // make 0 values automatic for longhand properties\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Attempt to force to optimize the object somehow\r\n\t\t\tObject.create(buggyValues);\r\n\t\t\t\r\n\t\t\treturn getBuggyValuesForThisBrowser.cache = buggyValues;\r\n\r\n\t\t};\r\n\t\tvar valueExistsInRootProperty = (cssText,key,rootKey,value) => {\r\n\t\t\tvalue = value.trim().toLowerCase();\r\n\t\t\t\r\n\t\t\t// detect suspicious values\r\n\t\t\tvar buggyValues = getBuggyValuesForThisBrowser();\r\n\t\t\t\r\n\t\t\t// apply common sense to the given value, per browser\r\n\t\t\tvar buggyState = buggyValues[key+':'+value];\r\n\t\t\tif(buggyState === 1) { return false; }\r\n\t\t\tif(buggyState !== 0 && (!buggyValues['*'] || CSSShorthands.unexpand(key).length == 0)) { return true; }\r\n\r\n\t\t\t// root properties are unlikely to lie\r\n\t\t\tif(key==rootKey) return false;\t\t\t\r\n\t\t\t\r\n\t\t\t// ask the browser is the best we can do right now\r\n\t\t\tvar values = value.split(/\\s+|\\s*,\\s*/g);\r\n\t\t\tvar validValues = ' ';\r\n\t\t\tvar validValuesExtractor = new RegExp(' '+rootKey+'(?:[-][-_a-zA-Z0-9]+)?[:]([^;]*)','gi');\r\n\t\t\tvar match; while(match = validValuesExtractor.exec(cssText)) {\r\n\t\t\t\tvalidValues += match[1] + ' ';\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < values.length; i++) {\r\n\t\t\t\tvar value = values[i];\r\n\t\t\t\tif(validValues.indexOf(' '+value+' ')==-1) return false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t\t\r\n\t\t};\r\n\t\t\r\n\t\t/** This will loop over the styles declarations */\r\n\t\tfunction analyzeStyleOfRule(style, selectorText, matchedElements, type, isInline) { isInline=!!isInline;\r\n\t\t\t\r\n\t\t\t// We want to filter rules that are not actually used\r\n\t\t\tvar count = matchedElements.length;\r\n\t\t\tvar selector = selectorText;\r\n\t\t\tvar selectorCat = {'1:true':'@inline','1:false':'@stylerule'}[''+type+':'+isInline]||'@atrule';\r\n\t\t\t\r\n\t\t\t// Keep track of unused rules\r\n\t\t\tvar isRuleUnused = (count == 0);\r\n\t\t\tif(isRuleUnused) {\r\n\t\t\t\tCSSUsage.StyleWalker.amountOfSelectorsUnused++;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// We need a generalized selector to collect some stats\r\n\t\t\tvar generalizedSelectors = (\r\n\t\t\t\t(selectorCat=='@stylerule')\r\n\t\t\t\t\t? [selectorCat].concat(generalizedSelectorsOf(selector))\r\n\t\t\t\t\t: [selectorCat, selector]\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\t// Get the datastores of the generalized selectors\r\n\t\t\tvar generalizedSelectorsData = map(generalizedSelectors, (generalizedSelector) => (\r\n\t\t\t\tCSSUsageResults.rules[generalizedSelector] || (CSSUsageResults.rules[generalizedSelector] = {count:0,props:Object.create(null)})\r\n\t\t\t));\r\n\t\t\t\r\n\t\t\t// Increment the occurence counter of found generalized selectors\r\n\t\t\tfor(var i = 0; i < generalizedSelectorsData.length; i++) {\r\n\t\t\t\tvar generalizedSelectorData = generalizedSelectorsData[i];\r\n\t\t\t\tgeneralizedSelectorData.count++\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// avoid most common browser lies\r\n\t\t\tvar cssText = ' '+style.cssText.toLowerCase(); \r\n\t\t\tif(browserIsEdge) {\r\n\t\t\t\tcssText = cssText.replace(/border: medium; border-image: none;/,'border: none;');\r\n\t\t\t\tcssText = cssText.replace(/ border-image: none;/,' ');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// For each property declaration in this rule, we collect some stats\r\n\t\t\tfor (var i = style.length; i--;) {\r\n\r\n\t\t\t\tvar key = style[i], rootKeyIndex=key.indexOf('-'), rootKey = rootKeyIndex==-1 ? key : key.substr(0,rootKeyIndex);\r\n\t\t\t\tvar normalizedKey = rootKeyIndex==0&&key.indexOf('-',1)==1 ? '--var' : key;\r\n\t\t\t\tvar styleValue = style.getPropertyValue(key);\r\n\t\t\t\t\r\n\t\t\t\t// Only keep styles that were declared by the author\r\n\t\t\t\t// We need to make sure we're only checking string props\r\n\t\t\t\tvar isValueInvalid = typeof styleValue !== 'string' && styleValue != \"\" && styleValue != undefined;\r\n\t\t\t\tif (isValueInvalid) { \r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar isPropertyUndefined = (cssText.indexOf(' '+key+':') == -1) && (styleValue=='initial' || !valueExistsInRootProperty(cssText, key, rootKey, styleValue));\r\n\t\t\t\tif (isPropertyUndefined) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// divide the value into simplified components\r\n\t\t\t\tvar values = CSSUsage.CSSValues.createValueArray(styleValue,normalizedKey);\r\n\t\t\t\tfor(var j=values.length; j--;) {\r\n\t\t\t\t\tvalues[j] = CSSUsage.CSSValues.parseValues(values[j],normalizedKey)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// log the property usage per selector\r\n\t\t\t\tfor(var gs = 0; gs < generalizedSelectorsData.length; gs++) {\r\n\t\t\t\t\tvar generalizedSelectorData = generalizedSelectorsData[gs];\r\n\t\t\t\t\t// get the datastore for current property\r\n\t\t\t\t\tvar propStats = generalizedSelectorData.props[normalizedKey] || (generalizedSelectorData.props[normalizedKey] = {count:0,values:Object.create(null)});\r\n\r\n\t\t\t\t\t// we saw the property one time\r\n\t\t\t\t\tpropStats.count++;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// we also saw a bunch of values\r\n\t\t\t\t\tfor(var v = 0; v < values.length; v++) {\r\n\t\t\t\t\t\tvar value = values[v];\t\t\t\t\r\n\t\t\t\t\t\t// increment the counts for those by one, too\r\n\t\t\t\t\t\tif(value.length>0) {\r\n\t\t\t\t\t\t\tpropStats.values[value] = (propStats.values[value]|0) + 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// if we may increment some counts due to this declaration\r\n\t\t\t\tif(count > 0) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// instanciate or fetch the property metadata\r\n\t\t\t\t\tvar propObject = CSSUsageResults.props[normalizedKey];\r\n\t\t\t\t\tif (!propObject) {\r\n\t\t\t\t\t\tpropObject = CSSUsageResults.props[normalizedKey] = {\r\n\t\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\t\tvalues: Object.create(null)\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// update the occurence counts of the property and value\r\n\t\t\t\t\tfor(var e = 0; e < matchedElements.length; e++) {\r\n\t\t\t\t\t\tvar element = matchedElements[e];\r\n\r\n\t\t\t\t\t\t// check what the elements already contributed for this property\r\n\t\t\t\t\t\tvar cssUsageMeta = element.CSSUsage || (element.CSSUsage=Object.create(null));\r\n\t\t\t\t\t\tvar knownValues = cssUsageMeta[normalizedKey] || (cssUsageMeta[normalizedKey] = []);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// increment the amount of affected elements which we didn't count yet\r\n\t\t\t\t\t\tif(knownValues.length == 0) { propObject.count += 1; }\r\n\r\n\t\t\t\t\t\t// add newly found values too\r\n\t\t\t\t\t\tfor(var v = 0; v < values.length; v++) {\r\n\t\t\t\t\t\t\tvar value = values[v];\r\n\t\t\t\t\t\t\tif(knownValues.indexOf(value) >= 0) { return; }\r\n\t\t\t\t\t\t\tpropObject.values[value] = (propObject.values[value]|0) + 1;\r\n\t\t\t\t\t\t\tknownValues.push(value);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction finalize() {\r\n\t\t\t\r\n\t\t\t// anonymize identifiers used for animation-name\r\n\t\t\tfunction removeAnimationNames() {\r\n\t\t\t\t\r\n\t\t\t\t// anonymize identifiers used for animation-name globally\r\n\t\t\t\tif(CSSUsageResults.props[\"animation-name\"]) {\r\n\t\t\t\t\tCSSUsageResults.props[\"animation-name\"].values = {\"<custom-ident>\":CSSUsageResults.props[\"animation-name\"].count};\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// anonymize identifiers used for animation-name per selector\r\n\t\t\t\tfor(var selector in CSSUsageResults.rules) { \r\n\t\t\t\t\tvar rule = CSSUsageResults.rules[selector];\r\n\t\t\t\t\tif(rule && rule.props && rule.props[\"animation-name\"]) {\r\n\t\t\t\t\t\trule.props[\"animation-name\"].values = {\"<custom-ident>\":rule.props[\"animation-name\"].count};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tremoveAnimationNames();\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\t//-------------------------------------------------------------------------\r\n\r\n\t\t/**\r\n\t\t * If you try to do querySelectorAll on pseudo selectors\r\n\t\t * it returns 0 because you are not actually doing the action the pseudo is stating those things,\r\n\t\t * but we will honor those declarations and we don't want them to be missed,\r\n\t\t * so we remove the pseudo selector from the selector text\r\n\t\t */\r\n\t\tfunction cleanSelectorText(text) {\r\n\t\t\tif(text.indexOf(':') == -1) {\r\n\t\t\t\treturn text;\r\n\t\t\t} else {\r\n\t\t\t\treturn text.replace(/([-_a-zA-Z0-9*\\[\\]]?):(?:hover|active|focus|before|after|not\\(:(hover|active|focus)\\))|::(?:before|after)/gi, '>>$1<<').replace(/(^| |>|\\+|~)>><</g,'$1*').replace(/\\(>><<\\)/g,'(*)').replace(/>>([-_a-zA-Z0-9*\\[\\]]?)<</g,'$1');\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * Returns an anonymized version of the selector.\r\n\t\t * @example \"#menu.open:hover>a.submenu\" => \"#id.class:hover > a.class\"\r\n\t\t */\r\n\t\tfunction generalizedSelectorsOf(value) {\r\n\t\t\t\r\n\t\t\t// Trim\r\n\t\t\tvalue = value.trim();\r\n\t\t\t\r\n\t\t\t// Collapse whitespace\r\n\t\t\tif (value) {\r\n\t\t\t\tvalue = value.replace(/\\s+/g, \" \");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Remove (...)\r\n\t\t\tif (value.indexOf(\"(\") != -1) {\r\n\t\t\t\tvalue = value.replace(/[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]*)[)])*[)])*[)])*[)])*[)]/g, \"\");\r\n\t\t\t\tvalue = value.replace(/[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]+|[(](?:[^()]*)[)])*[)])*[)])*[)])*[)]/g, \"\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Simplify \"...\" and '...'\r\n\t\t\tvalue = value.replace(/\"([^\"\\\\]|\\\\[^\"\\\\]|\\\\\\\\|\\\\\")*\"/g,'\"\"')\r\n\t\t\tvalue = value.replace(/'([^'\\\\]|\\\\[^'\\\\]|\\\\\\\\|\\\\')*'/g,\"''\");\r\n\r\n\t\t\t\r\n\t\t\t// Simplify [att]\r\n\t\t\tif (value.indexOf(\"[\") != -1) {\r\n\t\t\t\tvalue = value.replace(/\\[[^=\\[\\]]+=\"([^\"\\\\]|\\\\[^\"\\\\]|\\\\\\\\|\\\\\")*\"\\]/g, \"[a]\");\r\n\t\t\t\tvalue = value.replace(/\\[[^=\\[\\]]+='([^'\\\\]|\\\\[^'\\\\]|\\\\\\\\|\\\\')*'\\]/g, \"[a]\");\r\n\t\t\t\tvalue = value.replace(/\\[[^\\[\\]]+\\]/g, \"[a]\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Simplify .class\r\n\t\t\tif (value.indexOf(\".\") != -1) {\r\n\t\t\t\tvalue = value.replace(/[.][-_a-zA-Z][-_a-zA-Z0-9]*/g, \".c\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Simplify #id\r\n\t\t\tif (value.indexOf(\"#\") != -1) {\r\n\t\t\t\tvalue = value.replace(/[#][-_a-zA-Z][-_a-zA-Z0-9]*/g, \"#i\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Normalize combinators\r\n\t\t\tvalue = value.replace(/[ ]*([>|+|~])[ ]*/g,' $1 ');\r\n\t\t\t\r\n\t\t\t// Trim whitespace\r\n\t\t\tvalue = value.trim();\r\n\t\t\t\r\n\t\t\t// Remove unnecessary * to match Chrome\r\n\t\t\tvalue = value.replace(/[*]([#.\\x5B:])/g,'$1');\r\n\t\t\t\r\n\t\t\t// Now we can sort components so that all browsers give results similar to Chrome\r\n\t\t\tvalue = sortSelectorComponents(value)\r\n\t\t\t\r\n\t\t\t// Split multiple selectors\r\n\t\t\tvalue = value.split(/\\s*,\\s*/g);\r\n\r\n\t\t\treturn value;\r\n\r\n\t\t}\r\n\t\t\r\n\t\tvar ID_REGEXP = \"[#]i\";         // #id\r\n\t\tvar CLASS_REGEXP = \"[.]c\";      // .class\r\n\t\tvar ATTR_REGEXP = \"\\\\[a\\\\]\";    // [att]\r\n\t\tvar PSEUDO_REGEXP = \"[:][:]?[-_a-zA-Z][-_a-zA-Z0-9]*\"; // :pseudo\r\n\t\tvar SORT_REGEXPS = [\r\n\t\t\t\r\n\t\t\t// #id first\r\n\t\t\tnew RegExp(\"(\"+CLASS_REGEXP+\")(\"+ID_REGEXP+\")\",'g'),\r\n\t\t\tnew RegExp(\"(\"+ATTR_REGEXP+\")(\"+ID_REGEXP+\")\",'g'),\r\n\t\t\tnew RegExp(\"(\"+PSEUDO_REGEXP+\")(\"+ID_REGEXP+\")\",'g'),\r\n\t\t\t\r\n\t\t\t// .class second\r\n\t\t\tnew RegExp(\"(\"+ATTR_REGEXP+\")(\"+CLASS_REGEXP+\")\",'g'),\r\n\t\t\tnew RegExp(\"(\"+PSEUDO_REGEXP+\")(\"+CLASS_REGEXP+\")\",'g'),\r\n\t\t\t\r\n\t\t\t// [attr] third\r\n\t\t\tnew RegExp(\"(\"+PSEUDO_REGEXP+\")(\"+ATTR_REGEXP+\")\",'g'),\r\n\t\t\t\r\n\t\t\t// :pseudo last\r\n\t\t\t\r\n\t\t];\r\n\t\tfunction sortSelectorComponents(value) {\r\n\t\t\t\r\n\t\t\tvar oldValue; do { // Yeah this is a very inefficient bubble sort. I know.\r\n\t\t\t\t\r\n\t\t\t\toldValue = value;\r\n\t\t\t\tfor(var i = 0; i < SORT_REGEXPS.length; i++) {\r\n\t\t\t\t\tvar wrongPair = SORT_REGEXPS[i];\r\n\t\t\t\t\tvalue = value.replace(wrongPair,'$2$1');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} while(oldValue != value); return value;\r\n\r\n\t\t}\r\n\r\n\t}();\r\n\r\n\t//\r\n\t// extracts valuable informations about selectors in use\r\n\t//\r\n\tvoid function() {\r\n\t\t\r\n\t\t// \r\n\t\t// To understand framework and general css usage, we collect stats about classes, ids and pseudos.\r\n\t\t// Those objects have the following shape: \r\n\t\t// {\"hover\":5,\"active\":1,\"focus\":2}\r\n\t\t// \r\n\t\tvar cssPseudos = Object.create(null); // collect stats about which pseudo-classes and pseudo-elements are used in the css\r\n\t\tvar domClasses = Object.create(null); // collect stats about which css classes are found in the <... class> attributes of the dom\r\n\t\tvar cssClasses = Object.create(null); // collect stats about which css classes are used in the css\r\n\t\tvar domIds = Object.create(null);     // collect stats about which ids are found in the <... id> attributes of the dom\r\n\t\tvar cssIds = Object.create(null);     // collect stats about which ids are used in the css\r\n\t\t\r\n\t\t// \r\n\t\t// To understand Modernizer usage, we need to know how often some classes are used at the front of a selector\r\n\t\t// While we're at it, the code also collect the state for ids\r\n\t\t// \r\n\t\tvar cssLonelyIdGates = Object.create(null);    // .class something-else ==> {\"class\":1}\r\n\t\tvar cssLonelyClassGates = Object.create(null); // #id something-else ==> {\"id\":1}\r\n\t\tvar cssLonelyClassGatesMatches = [];           // .class something-else ==> [\".class something-else\"]\r\n\t\tvar cssLonelyIdGatesMatches = [];              // #id something-else ==> [\"#id something-else\"]\r\n\t\t\r\n\t\t//\r\n\t\t// These regular expressions catch patterns we want to track (see before)\r\n\t\t//\r\n\t\tvar ID_REGEXP = /[#][-_a-zA-Z][-_a-zA-Z0-9]*/g;     // #id\r\n\t\tvar ID_REGEXP1 = /[#][-_a-zA-Z][-_a-zA-Z0-9]*/;     // #id (only the first one)\r\n\t\tvar CLASS_REGEXP = /[.][-_a-zA-Z][-_a-zA-Z0-9]*/g;  // .class\r\n\t\tvar CLASS_REGEXP1 = /[.][-_a-zA-Z][-_a-zA-Z0-9]*/;  // .class (only the first one)\r\n\t\tvar PSEUDO_REGEXP = /[:][-_a-zA-Z][-_a-zA-Z0-9]*/g; // :pseudo (only the )\r\n\t\tvar GATEID_REGEXP = /^\\s*[#][-_a-zA-Z][-_a-zA-Z0-9]*([.][-_a-zA-Z][-_a-zA-Z0-9]*|[:][-_a-zA-Z][-_a-zA-Z0-9]*)*\\s+[^>+{, ][^{,]+$/; // #id ...\r\n\t\tvar GATECLASS_REGEXP = /^\\s*[.][-_a-zA-Z][-_a-zA-Z0-9]*([:][-_a-zA-Z][-_a-zA-Z0-9]*)*\\s+[^>+{, ][^{,]+$/; // .class ...\r\n\t\t\r\n\t\t/**\r\n\t\t * From a css selector text and a set of counters, \r\n\t\t * increment the counters for the matches in the selector of the 'feature' regular expression\r\n\t\t */\r\n\t\tfunction extractFeature(feature, selector, counters) {\r\n\t\t\tvar instances = selector.match(feature)||[];\r\n\t\t\tfor(var i = 0; i < instances.length; i++) {\r\n\t\t\t\tvar instance = instances[i];\r\n\t\t\t\tinstance = instance.substr(1);\r\n\t\t\t\tcounters[instance] = (counters[instance]|0) + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * This analyzer will collect over the selectors the stats defined before\r\n\t\t */\r\n\t\tCSSUsage.SelectorAnalyzer = function parseSelector(style, selectorsText) {\r\n\t\t\tif(typeof selectorsText != 'string') return;\r\n\t\t\t\t\r\n\t\t\tvar selectors = selectorsText.split(',');\r\n\t\t\tfor(var i = selectors.length; i--;) { var selector = selectors[i];\r\n\t\t\t\t\r\n\t\t\t\t// extract all features from the selectors\r\n\t\t\t\textractFeature(ID_REGEXP, selector, cssIds);\r\n\t\t\t\textractFeature(CLASS_REGEXP, selector, cssClasses);\r\n\t\t\t\textractFeature(PSEUDO_REGEXP, selector, cssPseudos);\r\n\t\t\t\t\r\n\t\t\t\t// detect specific selector patterns we're interested in\r\n\t\t\t\tif(GATEID_REGEXP.test(selector)) {\r\n\t\t\t\t\tcssLonelyIdGatesMatches.push(selector);\r\n\t\t\t\t\textractFeature(ID_REGEXP1, selector, cssLonelyIdGates);\r\n\t\t\t\t}\r\n\t\t\t\tif(GATECLASS_REGEXP.test(selector)) {\r\n\t\t\t\t\tcssLonelyClassGatesMatches.push(selector);\r\n\t\t\t\t\textractFeature(CLASS_REGEXP1, selector, cssLonelyClassGates);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * This analyzer will collect over the dom elements the stats defined before\r\n\t\t */\r\n\t\tCSSUsage.DOMClassAnalyzer = function(element) {\r\n\t\t\t\r\n\t\t\t// collect classes used in the wild\r\n\t\t\tif(element.className) {\r\n\t\t\t\tvar elementClasses = element.classList;\r\n\t\t\t\tfor(var cl = 0; cl < elementClasses.length; cl++) {\r\n\t\t\t\t\tvar c = elementClasses[cl];\r\n\t\t\t\t\tdomClasses[c] = (domClasses[c]|0) + 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// collect ids used in the wild\r\n\t\t\tif(element.id) {\r\n\t\t\t\tdomIds[element.id] = (domIds[element.id]|0) + 1;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t/**\r\n\t\t * This function will be called when all stats have been collected\r\n\t\t * at which point we will agregate some of them in useful values like Bootstrap usages, etc...\r\n\t\t */\r\n\t\tCSSUsage.SelectorAnalyzer.finalize = function() {\r\n\t\t\t\r\n\t\t\t// get arrays of the classes/ids used ({\"hover\":5} => [\"hover\"]))\r\n\t\t\tvar domClassesArray = Object.keys(domClasses);\r\n\t\t\tvar cssClassesArray = Object.keys(cssClasses);\r\n\t\t\tvar domIdsArray = Object.keys(domIds);\r\n\t\t\tvar cssIdsArray = Object.keys(cssIds);\r\n\r\n\t\t\tvar results = {\t\t\t\t\r\n\t\t\t\t// how many crawls are aggregated in this file (one of course in this case)\r\n\t\t\t\tSuccessfulCrawls: 1,\r\n\t\t\t\t\r\n\t\t\t\t// how many elements on the page (used to compute percentages for css.props)\r\n\t\t\t\tDOMElements: document.all.length,\r\n\t\t\t\t\r\n\t\t\t\t// how many selectors vs inline style, and other usage stats\r\n\t\t\t\tSelectorsFound: CSSUsage.StyleWalker.amountOfSelectors,\r\n\t\t\t\tInlineStylesFound: CSSUsage.StyleWalker.amountOfInlineStyles,\r\n\t\t\t\tSelectorsUnused: CSSUsage.StyleWalker.amountOfSelectorsUnused,\r\n\t\t\t\t\r\n\t\t\t\t// ids stats\r\n\t\t\t\tIdsUsed: domIdsArray.length,\r\n\t\t\t\tIdsRecognized: Object.keys(cssIds).length,\r\n\t\t\t\tIdsUsedRecognized: filter(domIdsArray, i => cssIds[i]).length,\r\n\t\t\t\t\r\n\t\t\t\t// classes stats\r\n\t\t\t\tClassesUsed: domClassesArray.length,\r\n\t\t\t\tClassesRecognized: Object.keys(cssClasses).length,\r\n\t\t\t\tClassesUsedRecognized: filter(domClassesArray, c => cssClasses[c]).length,\t\t\t\t\r\n\t\t\t};\r\n\r\n\t\t\tresults = getFwkUsage(results, cssLonelyClassGates, domClasses, domIds, cssLonelyIdGates, cssClasses);\r\n\t\t\tresults = getPatternUsage(results, domClasses, cssClasses);\r\n\t\t\t\r\n\t\t\tCSSUsageResults.usages = results;\r\n\t\t\tif(window.debugCSSUsage) console.log(CSSUsageResults.usages);\r\n\t\t}\r\n\r\n\t\t\r\n\t\t\t\r\n\t}();\r\n\r\n\t//\r\n\t// Execution scheduler:\r\n\t// This is where we decide what to run, and when\r\n\t//\r\n\tvoid function() {\r\n\r\n\t\tif(document.readyState !== 'complete') {\r\n\t\t\t\r\n\t\t\t// if the document is loading, run when it loads or in 10s, whichever is less\r\n\t\t\twindow.addEventListener('load', onready);\r\n\t\t\tsetTimeout(onready, 10000);\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\t// if the document is ready, run now\r\n\t\t\tonready();\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * This is the main entrypoint of our script\r\n\t\t */\r\n\t\tfunction onready() {\r\n\t\t\t\r\n\t\t\t// Uncomment if you want to set breakpoints when running in the console\r\n\t\t\t//debugger;\r\n\t\t\t\r\n\t\t\t// Prevent this code from running multiple times\r\n\t\t\tvar firstTime = !onready.hasAlreadyRun; onready.hasAlreadyRun = true;\r\n\t\t\tif(!firstTime) { return; /* for now... */ }\r\n\t\t\t\r\n\t\t\t// Prevent this code from running when the page has no stylesheet (probably a redirect page)\r\n\t\t\tif(document.styleSheets.length == 0) { return; }\r\n\r\n\t\t\t// Keep track of duration\r\n\t\t\tvar startTime = performance.now();\r\n\r\n\t\t\t// register tools\r\n\t\t\tCSSUsage.StyleWalker.ruleAnalyzers.push(CSSUsage.PropertyValuesAnalyzer);\r\n\t\t\tCSSUsage.StyleWalker.ruleAnalyzers.push(CSSUsage.SelectorAnalyzer);\r\n\t\t\tCSSUsage.StyleWalker.elementAnalyzers.push(CSSUsage.DOMClassAnalyzer);\r\n\t\t\tCSSUsage.StyleWalker.elementAnalyzers.push(HtmlUsage.GetNodeName);\r\n\r\n\t\t\t// perform analysis\r\n\t\t\tCSSUsage.StyleWalker.walkOverDomElements();\r\n\t\t\tCSSUsage.StyleWalker.walkOverCssStyles();\r\n\t\t\tCSSUsage.PropertyValuesAnalyzer.finalize();\r\n\t\t\tCSSUsage.SelectorAnalyzer.finalize();\r\n\r\n\t\t\t// Update duration\r\n\t\t\tCSSUsageResults.duration = (performance.now() - startTime)|0;\r\n\r\n\t\t\t// DO SOMETHING WITH THE CSS OBJECT HERE\r\n\t\t\tif(window.debugCSSUsage) console.log(CSSUsageResults);\r\n\t\t\tif(window.onCSSUsageResults) {\r\n\t\t\t\twindow.onCSSUsageResults(CSSUsageResults);\r\n\t\t\t};\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\t}();\r\n\t\r\n} catch (ex) { /* do something maybe */ throw ex; } }();\r\n// http://blueprintcss.org/tests/parts/grid.html\r\nvar hasBluePrintUsage = function() {\r\n    \r\n    if(!document.querySelector(\".container\")) {\r\n        return false;\r\n    }\r\n    \r\n    for(var i = 24+1; --i;) {\r\n        if(document.querySelector(\".container > .span-\"+i)) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n    \r\n}\r\n//\r\n// report how many times the classes in the following arrays have been used in the dom\r\n// (bootstrap stats)\r\n//\r\n\r\nvar detectedBootstrapGridUsages = function(domClasses) {\r\n    var _ = window.CSSUsageLodash;\r\n\tvar reduce = _.reduce.bind(_);\r\n    var trackedClasses = [];\r\n    \r\n    var sizes = ['xs','sm','md','lg'];\r\n    for(var i = sizes.length; i--;) { var size = sizes[i];\r\n        for(var j = 12+1; --j;) {\r\n            trackedClasses.push('col-'+size+'-'+j);\r\n            for(var k = 12+1; --k;) {\r\n                trackedClasses.push('col-'+size+'-'+j+'-offset-'+k);\r\n                trackedClasses.push('col-'+size+'-'+j+'-push-'+k);\r\n                trackedClasses.push('col-'+size+'-'+j+'-pull-'+k);\r\n            }\r\n        }\r\n    }\r\n    \r\n    return reduce(trackedClasses, (a,b) => a+(domClasses[b]|0), 0);\r\n    \r\n};\r\n\r\nvar detectedBootstrapFormUsages = function(domClasses) {\r\n    var _ = window.CSSUsageLodash;\r\n\tvar reduce = _.reduce.bind(_);\r\n    var trackedClasses = [\r\n        'form-group', 'form-group-xs', 'form-group-sm', 'form-group-md', 'form-group-lg',\r\n        'form-control', 'form-horizontal', 'form-inline',\r\n        'btn','btn-primary','btn-secondary','btn-success','btn-warning','btn-danger','btn-error'\r\n    ];\r\n    \r\n    return reduce(trackedClasses, (a,b) => a+(domClasses[b]|0), 0);\r\n    \r\n};\r\n\r\nvar detectedBootstrapAlertUsages = function(domClasses) {\r\n    var _ = window.CSSUsageLodash;\r\n\tvar reduce = _.reduce.bind(_);\r\n    var trackedClasses = [\r\n        'alert','alert-primary','alert-secondary','alert-success','alert-warning','alert-danger','alert-error'\r\n    ];\r\n    \r\n    return reduce(trackedClasses, (a,b) => a+(domClasses[b]|0), 0);\r\n    \r\n};\r\n\r\nvar detectedBootstrapFloatUsages = function(domClasses) {\r\n    var _ = window.CSSUsageLodash;\r\n\tvar reduce = _.reduce.bind(_);\r\n    var trackedClasses = [\r\n        'pull-left','pull-right',\r\n    ];\r\n    \r\n    return reduce(trackedClasses, (a,b) => a+(domClasses[b]|0), 0);\r\n    \r\n};\r\n// https://github.com/Dogfalo/materialize/blob/master/sass/components/_grid.scss\r\nvar hasDogfaloMaterializeUsage = function() {\r\n    \r\n    if(!document.querySelector(\".container > .row > .col\")) {\r\n        return false;\r\n    }\r\n    \r\n    for(var i = 12+1; --i;) {\r\n        var classesToLookUp = ['s','m','l'];\r\n        for(var d = 0; d < classesToLookUp.length; d++) {\r\n            var s = classesToLookUp[d];\r\n            if(document.querySelector(\".container > .row > .col.\"+s+\"\"+i)) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n    \r\n}\r\n// http://www.gumbyframework.com/docs/grid/#!/basic-grid\r\nvar hasGrumbyUsage = function() {\r\n    \r\n    if(!document.querySelector(\".row .columns\")) {\r\n        return false;\r\n    }\r\n    \r\n    var classesToLookUp = [\"one\",\"two\",\"three\",\"four\",\"five\",\"six\",\"seven\",\"eight\",\"nine\",\"ten\",\"eleven\",\"twelve\"];\r\n    for(var cl = 0; cl < classesToLookUp.length; cl++ ) {\r\n        var fraction = classesToLookUp[cl];\r\n        if(document.querySelector(\".row > .columns.\"+fraction)) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n    \r\n}\r\n// https://raw.githubusercontent.com/csswizardry/inuit.css/master/generic/_widths.scss\r\nvar hasInuitUsage = function() {\r\n    \r\n    if(!document.querySelector(\".grid .grid__item\")) {\r\n        return false;\r\n    }\r\n    \r\n    var classesToLookUp = [\"one-whole\",\"one-half\",\"one-third\",\"two-thirds\",\"one-quarter\",\"two-quarters\",\"one-half\",\"three-quarters\",\"one-fifth\",\"two-fifths\",\"three-fifths\",\"four-fifths\",\"one-sixth\",\"two-sixths\",\"one-third\",\"three-sixths\",\"one-half\",\"four-sixths\",\"two-thirds\",\"five-sixths\",\"one-eighth\",\"two-eighths\",\"one-quarter\",\"three-eighths\",\"four-eighths\",\"one-half\",\"five-eighths\",\"six-eighths\",\"three-quarters\",\"seven-eighths\",\"one-tenth\",\"two-tenths\",\"one-fifth\",\"three-tenths\",\"four-tenths\",\"two-fifths\",\"five-tenths\",\"one-half\",\"six-tenths\",\"three-fifths\",\"seven-tenths\",\"eight-tenths\",\"four-fifths\",\"nine-tenths\",\"one-twelfth\",\"two-twelfths\",\"one-sixth\",\"three-twelfths\",\"one-quarter\",\"four-twelfths\",\"one-third\",\"five-twelfths\",\"six-twelfths\",\"one-half\",\"seven-twelfths\",\"eight-twelfths\",\"two-thirds\",\"nine-twelfths\",\"three-quarters\",\"ten-twelfths\",\"five-sixths\",\"eleven-twelfths\"];\r\n\r\n    for(var cu = 0; cu < classesToLookUp.length; cu++ ) {\r\n        var fraction = classesToLookUp[cu];\r\n\r\n        var subClassesToLookUp = [\"\",\"palm-\",\"lap-\",\"portable-\",\"desk-\"];\r\n        for(var sc = 0; sc < subClassesToLookUp.length; sc++) {\r\n            var ns = subClassesToLookUp[sc];\r\n            if(document.querySelector(\".grid > .grid__item.\"+ns+fraction)) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n    \r\n}\r\nvar getLonelyGatesUsage = function (cssLonelyClassGates, domClasses, domIds, cssLonelyIdGates) {\r\n\r\n    var _ = window.CSSUsageLodash;\r\n\r\n    if((cssLonelyClassGates || domClasses || domIds || cssLonelyIdGates) == undefined) return;\r\n    \r\n    // get arrays of the .class gates used ({\"hover\":5} => [\"hover\"]), filter irrelevant entries\r\n    var cssUniqueLonelyClassGatesArray = Object.keys(cssLonelyClassGates);\r\n    var cssUniqueLonelyClassGatesUsedArray = _(cssUniqueLonelyClassGatesArray).filter((c) => domClasses[c]).value();\r\n    var cssUniqueLonelyClassGatesUsedWorthArray = _(cssUniqueLonelyClassGatesUsedArray).filter((c)=>(cssLonelyClassGates[c]>9)).value();\r\n    if(window.debugCSSUsage) console.log(cssLonelyClassGates);\r\n    if(window.debugCSSUsage) console.log(cssUniqueLonelyClassGatesUsedWorthArray);\r\n\r\n    // get arrays of the #id gates used ({\"hover\":5} => [\"hover\"]), filter irrelevant entries\r\n    var cssUniqueLonelyIdGatesArray = Object.keys(cssLonelyIdGates);\r\n    var cssUniqueLonelyIdGatesUsedArray = _(cssUniqueLonelyIdGatesArray).filter((c) => domIds[c]).value();\r\n    var cssUniqueLonelyIdGatesUsedWorthArray = _(cssUniqueLonelyIdGatesUsedArray).filter((c)=>(cssLonelyIdGates[c]>9)).value();\r\n    if(window.debugCSSUsage) console.log(cssLonelyIdGates);\r\n    if(window.debugCSSUsage) console.log(cssUniqueLonelyIdGatesUsedWorthArray);\r\n}\r\n//\r\n// report how many times the classes in the following arrays have been used as css gate\r\n// (modernizer stats)\r\n//\r\n\r\n// https://modernizr.com/docs#features\r\nvar detectedModernizerUsages = function(cssLonelyClassGates) {\r\n\r\n    if((cssLonelyClassGates) == undefined) return;\r\n    \r\n    var ModernizerUsages = {count:0,values:{/*  \"js\":1,  \"no-js\":2  */}};\r\n    var trackedClasses = [\"js\",\"ambientlight\",\"applicationcache\",\"audio\",\"batteryapi\",\"blobconstructor\",\"canvas\",\"canvastext\",\"contenteditable\",\"contextmenu\",\"cookies\",\"cors\",\"cryptography\",\"customprotocolhandler\",\"customevent\",\"dart\",\"dataview\",\"emoji\",\"eventlistener\",\"exiforientation\",\"flash\",\"fullscreen\",\"gamepads\",\"geolocation\",\"hashchange\",\"hiddenscroll\",\"history\",\"htmlimports\",\"ie8compat\",\"indexeddb\",\"indexeddbblob\",\"input\",\"search\",\"inputtypes\",\"intl\",\"json\",\"olreversed\",\"mathml\",\"notification\",\"pagevisibility\",\"performance\",\"pointerevents\",\"pointerlock\",\"postmessage\",\"proximity\",\"queryselector\",\"quotamanagement\",\"requestanimationframe\",\"serviceworker\",\"svg\",\"templatestrings\",\"touchevents\",\"typedarrays\",\"unicoderange\",\"unicode\",\"userdata\",\"vibrate\",\"video\",\"vml\",\"webintents\",\"animation\",\"webgl\",\"websockets\",\"xdomainrequest\",\"adownload\",\"audioloop\",\"audiopreload\",\"webaudio\",\"lowbattery\",\"canvasblending\",\"todataurljpeg,todataurlpng,todataurlwebp\",\"canvaswinding\",\"getrandomvalues\",\"cssall\",\"cssanimations\",\"appearance\",\"backdropfilter\",\"backgroundblendmode\",\"backgroundcliptext\",\"bgpositionshorthand\",\"bgpositionxy\",\"bgrepeatspace,bgrepeatround\",\"backgroundsize\",\"bgsizecover\",\"borderimage\",\"borderradius\",\"boxshadow\",\"boxsizing\",\"csscalc\",\"checked\",\"csschunit\",\"csscolumns\",\"cubicbezierrange\",\"display-runin\",\"displaytable\",\"ellipsis\",\"cssescape\",\"cssexunit\",\"cssfilters\",\"flexbox\",\"flexboxlegacy\",\"flexboxtweener\",\"flexwrap\",\"fontface\",\"generatedcontent\",\"cssgradients\",\"hsla\",\"csshyphens,softhyphens,softhyphensfind\",\"cssinvalid\",\"lastchild\",\"cssmask\",\"mediaqueries\",\"multiplebgs\",\"nthchild\",\"objectfit\",\"opacity\",\"overflowscrolling\",\"csspointerevents\",\"csspositionsticky\",\"csspseudoanimations\",\"csspseudotransitions\",\"cssreflections\",\"regions\",\"cssremunit\",\"cssresize\",\"rgba\",\"cssscrollbar\",\"shapes\",\"siblinggeneral\",\"subpixelfont\",\"supports\",\"target\",\"textalignlast\",\"textshadow\",\"csstransforms\",\"csstransforms3d\",\"preserve3d\",\"csstransitions\",\"userselect\",\"cssvalid\",\"cssvhunit\",\"cssvmaxunit\",\"cssvminunit\",\"cssvwunit\",\"willchange\",\"wrapflow\",\"classlist\",\"createelementattrs,createelement-attrs\",\"dataset\",\"documentfragment\",\"hidden\",\"microdata\",\"mutationobserver\",\"bdi\",\"datalistelem\",\"details\",\"outputelem\",\"picture\",\"progressbar,meter\",\"ruby\",\"template\",\"time\",\"texttrackapi,track\",\"unknownelements\",\"es5array\",\"es5date\",\"es5function\",\"es5object\",\"es5\",\"strictmode\",\"es5string\",\"es5syntax\",\"es5undefined\",\"es6array\",\"contains\",\"generators\",\"es6math\",\"es6number\",\"es6object\",\"promises\",\"es6string\",\"devicemotion,deviceorientation\",\"oninput\",\"filereader\",\"filesystem\",\"capture\",\"fileinput\",\"directory\",\"formattribute\",\"localizednumber\",\"placeholder\",\"requestautocomplete\",\"formvalidation\",\"sandbox\",\"seamless\",\"srcdoc\",\"apng\",\"jpeg2000\",\"jpegxr\",\"sizes\",\"srcset\",\"webpalpha\",\"webpanimation\",\"webplossless,webp-lossless\",\"webp\",\"inputformaction\",\"inputformenctype\",\"inputformmethod\",\"inputformtarget\",\"beacon\",\"lowbandwidth\",\"eventsource\",\"fetch\",\"xhrresponsetypearraybuffer\",\"xhrresponsetypeblob\",\"xhrresponsetypedocument\",\"xhrresponsetypejson\",\"xhrresponsetypetext\",\"xhrresponsetype\",\"xhr2\",\"scriptasync\",\"scriptdefer\",\"speechrecognition\",\"speechsynthesis\",\"localstorage\",\"sessionstorage\",\"websqldatabase\",\"stylescoped\",\"svgasimg\",\"svgclippaths\",\"svgfilters\",\"svgforeignobject\",\"inlinesvg\",\"smil\",\"textareamaxlength\",\"bloburls\",\"datauri\",\"urlparser\",\"videoautoplay\",\"videoloop\",\"videopreload\",\"webglextensions\",\"datachannel\",\"getusermedia\",\"peerconnection\",\"websocketsbinary\",\"atob-btoa\",\"framed\",\"matchmedia\",\"blobworkers\",\"dataworkers\",\"sharedworkers\",\"transferables\",\"webworkers\"];\r\n    for(var tc = 0; tc < trackedClasses.length; tc++) {\r\n        var c = trackedClasses[tc];\r\n        countInstancesOfTheClass(c); \r\n        countInstancesOfTheClass('no-'+c);\r\n    }\r\n    return ModernizerUsages;\r\n    \r\n    function countInstancesOfTheClass(c) {\r\n        var count = cssLonelyClassGates[c]; if(!count) return; \r\n        ModernizerUsages.count += count; \r\n        ModernizerUsages.values[c]=count; \r\n    }\r\n    \r\n}\r\nfunction getFwkUsage(results, cssLonelyClassGates, domClasses, domIds, cssLonelyIdGates, cssClasses) {\r\n\r\n    // Modernizer\r\n    getLonelyGatesUsage(cssLonelyClassGates, domClasses, domIds, cssLonelyIdGates);\r\n    detectedModernizerUsages(cssLonelyClassGates);\r\n    results.FwkModernizer = !!window.Modernizer;\r\n    results.FwkModernizerDOMUsages = detectedModernizerUsages(domClasses);\r\n\tresults.FwkModernizerCSSUsages = detectedModernizerUsages(cssLonelyClassGates);\r\n\r\n    // Bootstrap\r\n    results.FwkBootstrap = !!((window.jQuery||window.$) && (window.jQuery||window.$).fn && (window.jQuery||window.$).fn.modal)|0;\r\n    results.FwkBootstrapGridUsage = detectedBootstrapGridUsages(domClasses);\r\n    results.FwkBootstrapFormUsage = detectedBootstrapFormUsages(domClasses);\r\n    results.FwkBootstrapFloatUsage = detectedBootstrapFloatUsages(domClasses);\r\n    results.FwkBootstrapAlertUsage = detectedBootstrapAlertUsages(domClasses);    \r\n    results.FwkBootstrapGridRecognized = detectedBootstrapGridUsages(cssClasses);\r\n    results.FwkBootstrapFormRecognized = detectedBootstrapFormUsages(cssClasses);\r\n    results.FwkBootstrapFloatRecognized = detectedBootstrapFloatUsages(cssClasses);\r\n    results.FwkBootstrapAlertRecognized = detectedBootstrapAlertUsages(cssClasses);\r\n\r\n    // Grumby\r\n    results.FwkGrumby = hasGrumbyUsage()|0;\r\n\r\n    // Inuit\r\n    results.FwkInuit = hasInuitUsage()|0;\r\n\r\n    // Blueprint\r\n    results.FwkBluePrint = hasBluePrintUsage()|0;\r\n\r\n    // Dog Falo\r\n    results.FwkDogfaloMaterialize = hasDogfaloMaterializeUsage()|0;\r\n\r\n    return results;\r\n}\r\n//\r\n// report how many times the classes in the following arrays have been used in the dom\r\n// (general stats)\r\n//\r\n\r\n/** count how many times the usual clearfix classes are used */\r\nvar detectedClearfixUsages = function(domClasses) {\r\n\r\n    var _ = window.CSSUsageLodash;\r\n\tvar reduce = _.reduce.bind(_);\r\n    \r\n    var trackedClasses = [\r\n        'clearfix','clear',\r\n    ];\r\n    \r\n    return reduce(trackedClasses, (a,b) => a+(domClasses[b]|0), 0);\r\n    \r\n};\r\n\r\n/** count how many times the usual hide/show classes are used */\r\nvar detectedVisibilityUsages = function(domClasses) {\r\n    var _ = window.CSSUsageLodash;\r\n\tvar reduce = _.reduce.bind(_);\r\n    \r\n    var trackedClasses = [\r\n        'show', 'hide', 'visible', 'hidden', \r\n    ];\r\n    \r\n    return reduce(trackedClasses, (a,b) => a+(domClasses[b]|0), 0);\r\n    \r\n};\r\nfunction getPatternUsage(results, domClasses, cssClasses) {\r\n    results.PatClearfixUsage = detectedClearfixUsages(domClasses);\r\n\tresults.PatVisibilityUsage = detectedVisibilityUsages(domClasses);\r\n    results.PatClearfixRecognized = detectedClearfixUsages(cssClasses);\r\n    results.PatVisibilityRecognized = detectedVisibilityUsages(cssClasses);\r\n\r\n    return results;\r\n}"]}